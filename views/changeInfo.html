<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원정보 수정</title>
    <link rel="stylesheet" href="changeInfo.css">
    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script src="kakao_Api.js"></script>
</head>
<body>
    <div class="container">
        <h2>회원정보 수정</h2>
        <form action="http://localhost:3000/user/changeInfo" method="post">
            <div class="section">
                <h3>아이디/비밀번호</h3>
                <div class="input-group">
                    <label for="userid">아이디</label>
                    <input name="user_id" type="text" id="userid" value="{{user.user_id}}" disabled>
                </div>
                <div class="input-group">
                    <label for="password">비밀번호</label>
                    <input name="pw" type="password" id="password" placeholder="비밀번호를 입력하세요">
                </div>
                <div class="input-group">
                    <label for="password-confirm">비밀번호 확인</label>
                    <input type="password" id="password-confirm" placeholder="비밀번호를 확인하세요">
                </div>
            </div>
            <div class="section">
                <h3>내 정보 입력</h3>
                <div class="input-group">
                    <label for="name">이름</label>
                    <input name="name" type="text" id="name" value="{{user.name}}" placeholder="이름을 입력하세요">
                </div>
                <div class="input-group">
                    <label for="nickname">내닉네임</label>
                    <input name="nick" type="text" id="nick" value="{{user.nick}}" placeholder="새 닉네임을 입력하세요">
                </div>
                <div class="input-group">
                    <label for="email">이메일</label>
                    <input name="email" type="email" id="email" value="{{user.email}}" placeholder="새 이메일을 입력하세요">
                </div>
                <div class="input-group">
                    <label for="address">주소</label>
                    <input type="text" id="sample4_postcode" class="rgst_inputBox" value="{{user.addr3}}" placeholder="우편번호" name="addr3">
                    <input type="button" id="searchAddrButton" value="우편번호 찾기" class="searchAddr"><br>
                    <input type="text" id="sample4_roadAddress" class="rgst_inputBox" value="{{user.addr1}}" placeholder="도로명주소" name="addr1">
                    <input type="text" id="sample4_detailAddress" class="rgst_inputBox" value="{{user.addr2}}" placeholder="상세주소" name="addr2"><br>
                </div>
                <div class="input-group">
                    <label for="phone">휴대전화 번호</label>
                    <input name="tel" type="tel" id="phone" value="{{user.tel}}">
                </div>
                <div class="input-group">
                    <label for="wd_account">계좌</label>
                    <input name="wd_account" type="text" id="wd_account" value="{{user.wd_account}}">
                </div>
                <div class="input-group">
                    <label for="ba_number">계좌번호</label>
                    <input name="ba_number" type="text" id="ba_number" value="{{user.ba_number}}">
                </div>
            </div>
            <div class="input-btn">
                <input type="submit" class="button" value="정보 수정">
                <a href="/user/myPage" class="button">취소</a>
            </div>
        </form>
    </div>
    <script>
        document.getElementById('searchAddrButton').addEventListener('click', sample4_execDaumPostcode);
        function sample4_execDaumPostcode() {
            var element_wrap = document.createElement('div');
            document.body.appendChild(element_wrap);
            var currentPostcode = new daum.Postcode({
                oncomplete: function (data) {
                    var roadAddr = data.roadAddress;
                    var extraRoadAddr = '';
                    if (data.bname !== '' && /[동|로|가]$/g.test(data.bname)) {
                        extraRoadAddr += data.bname;
                    }
                    if (data.buildingName !== '' && data.apartment === 'Y') {
                        extraRoadAddr += (extraRoadAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                    }
                    if (extraRoadAddr !== '') {
                        extraRoadAddr = ' (' + extraRoadAddr + ')';
                    }
                    document.getElementById('sample4_postcode').value = data.zonecode;
                    document.getElementById("sample4_roadAddress").value = roadAddr;
                    document.getElementById("sample4_detailAddress").value = '';
                    document.body.removeChild(element_wrap);
                },
                container: element_wrap
            });
            currentPostcode.open();
        }
    </script>
</body>
</html>
