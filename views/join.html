<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 카카오 주소입력api -->
    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <title>Document</title>
</head>

<body>
    <h1>회원가입 페이지 입니다!</h1>
    <form action="http://localhost:3000/user/join" method="post">
        id:<input type="text" name="id"><br>
        pw:<input type="password" name="pw"><br>
        nick:<input type="text" name="nick"><br>
        address:<input type="text" id="sample4_postcode" class="rgst_inputBox" placeholder="우편번호" name="addr3">
        <input type="button" id="searchAddrButton" value="우편번호 찾기" class="searchAddr"><br>
        <input type="text" id="sample4_roadAddress" class="rgst_inputBox" placeholder="도로명주소" name="addr1">
        <input type="text" id="sample4_detailAddress" class="rgst_inputBox" placeholder="상세주소" name="addr2"><br>
        email:<input type="email" name="email"><br>
        birth_date:<input type="text" name="birth_date"><br>
        gender:<input type="radio" name="gender" value="M">남
        <input type="radio" name="gender" value="W">여<br>
        tel:<input type="text" name="tel"><br>
        계좌:<input type="text" name="wd_account"><br>
        계좌번호:<input type="text" name="ba_number"><br>


        <input type="submit" value="회원가입">

        <script>
            document.getElementById('searchAddrButton').addEventListener('click', sample4_execDaumPostcode);

            function sample4_execDaumPostcode() {
                var element_wrap = document.createElement('div'); // 팝업을 감쌀 div 생성
                document.body.appendChild(element_wrap); // body에 div 추가

                var currentPostcode = new daum.Postcode({
                    oncomplete: function (data) {
                        // 팝업에서 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.

                        // 도로명 주소의 노출 규칙에 따라 주소를 표시한다.
                        // 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
                        var roadAddr = data.roadAddress; // 도로명 주소 변수
                        var extraRoadAddr = ''; // 참고 항목 변수

                        // 법정동명이 있을 경우 추가한다. (법정리는 제외)
                        // 법정동의 경우 마지막 문자가 "동/로/가"로 끝난다.
                        if (data.bname !== '' && /[동|로|가]$/g.test(data.bname)) {
                            extraRoadAddr += data.bname;
                        }
                        // 건물명이 있고, 공동주택일 경우 추가한다.
                        if (data.buildingName !== '' && data.apartment === 'Y') {
                            extraRoadAddr += (extraRoadAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                        }
                        // 표시할 참고항목이 있을 경우, 괄호까지 추가한 최종 문자열을 만든다.
                        if (extraRoadAddr !== '') {
                            extraRoadAddr = ' (' + extraRoadAddr + ')';
                        }

                        // 우편번호와 주소 정보를 해당 필드에 넣는다.
                        document.getElementById('sample4_postcode').value = data.zonecode;
                        document.getElementById("sample4_roadAddress").value = roadAddr;
                        document.getElementById("sample4_detailAddress").value = ''; // 상세주소 필드는 사용자가 직접 입력하도록 설정

                        // 팝업을 감싼 div 제거
                        document.body.removeChild(element_wrap);
                    },
                    // 팝업을 감쌀 div 설정
                    container: element_wrap
                });

                currentPostcode.open();
            }
            document.getElementById('addressForm').addEventListener('submit', function (event) {
                // addr1, addr2, addr3 값을 합쳐서 address 필드에 넣기
                var postcode = document.getElementById('sample4_postcode').value;
                var roadAddress = document.getElementById('sample4_roadAddress').value;
                var detailAddress = document.getElementById('sample4_detailAddress').value;
                var fullAddress = postcode + ' ' + roadAddress + ' ' + detailAddress;

                document.getElementById('fullAddress').value = fullAddress;
            });
        </script>





    </form>
</body>

</html>